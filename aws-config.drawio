<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.5.1 Chrome/142.0.7444.265 Electron/39.6.1 Safari/537.36" version="29.5.1">
  <diagram id="aws-config-architecture" name="Architecture">
    <mxGraphModel dx="1382" dy="709" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="bg" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" value="" vertex="1">
          <mxGeometry height="1320" width="1940" x="30" y="30" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="1" source="users" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="r53default" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
                <mxPoint x="180" y="200" />
                <mxPoint x="300" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e2" edge="1" parent="1" source="users" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="r53backup" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
                <mxPoint x="180" y="200" />
                <mxPoint x="180" y="361" />
              <mxPoint x="300" y="361" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e4" edge="1" parent="1" source="r53backup" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="vercel" value="backup DNS">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="341" y="335" />
              <mxPoint x="565" y="335" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e5" edge="1" parent="1" source="r53default" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="ses" value="MX/TXT">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="341" y="139" />
              <mxPoint x="901" y="139" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="r53default" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="vercel" value="web DNS">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="341" y="139" />
              <mxPoint x="565" y="139" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e6" edge="1" parent="1" source="ses" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="s3" value="archive">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="ses" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" target="lambda" value="invoke">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="942" y="191" />
              <mxPoint x="1132" y="191" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e8" edge="1" parent="1" source="lambda" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="s3" value="read">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1132" y="430" />
              <mxPoint x="901" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e9" edge="1" parent="1" source="lambda" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="gmail" value="forward">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
                <mxPoint x="1132" y="250" />
              <mxPoint x="1715" y="250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e10" edge="1" parent="1" source="iam" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="lambda" value="assume role">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1351" y="515" />
              <mxPoint x="1132" y="515" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e11" edge="1" parent="1" source="lambda" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;fontColor=#000000;labelBackgroundColor=#f5f5f5;" target="cw" value="logs">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1132" y="405" />
              <mxPoint x="1561" y="405" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="title" parent="1" style="text;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontSize=14;labelBackgroundColor=#f5f5f5;" value="&lt;b&gt;Terraform Cloud Workspace: aws-config&lt;/b&gt;&lt;br&gt;Organization: brignano&lt;br&gt;Workspace URL: https://app.terraform.io/app/brignano/workspaces/aws-config&lt;br&gt;State resource count: 38" vertex="1">
          <mxGeometry height="90" width="1040" x="60" y="55" as="geometry" />
        </mxCell>
        <mxCell id="users" parent="1" style="shape=actor;whiteSpace=wrap;html=1;verticalLabelPosition=bottom;verticalAlign=top;align=center;labelBackgroundColor=#f5f5f5;" value="Internet Users" vertex="1">
          <mxGeometry height="60" width="40" x="90" y="170" as="geometry" />
        </mxCell>
        <mxCell id="vercel" parent="1" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#f5f5f5;fontBackgroundColor=#f5f5f5;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://www.svgrepo.com/show/327408/logo-vercel.svg;" value="brignano.io (Vercel)" vertex="1">
          <mxGeometry height="90" width="90" x="520" y="150" as="geometry" />
        </mxCell>
        <mxCell id="gmail" parent="1" style="shape=mxgraph.ios7.icons.mail;html=1;labelBackgroundColor=#f5f5f5;strokeWidth=2;strokeColor=#0080F0;" value="Forward Destination (Gmail)" vertex="1">
          <mxGeometry height="55" width="90" x="1670" y="140" as="geometry" />
        </mxCell>
        <mxCell id="r53default" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.route_53;labelBackgroundColor=#f5f5f5;" value="aws_route53_zone.default" vertex="1">
          <mxGeometry height="82" width="82" x="300" y="159" as="geometry" />
        </mxCell>
        <mxCell id="r53backup" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#8C4FFF;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.route_53;labelBackgroundColor=#f5f5f5;" value="aws_route53_zone.backup" vertex="1">
          <mxGeometry height="82" width="82" x="300" y="320" as="geometry" />
        </mxCell>
        <mxCell id="ses" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#DD344C;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.simple_email_service;labelBackgroundColor=#f5f5f5;fontBackgroundColor=#f5f5f5;" value="SES Identity + Rules" vertex="1">
          <mxGeometry height="82" width="82" x="860" y="150" as="geometry" />
        </mxCell>
        <mxCell id="s3" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#7AA116;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;labelBackgroundColor=#f5f5f5;" value="aws_s3_bucket.email" vertex="1">
          <mxGeometry height="82" width="82" x="860" y="360" as="geometry" />
        </mxCell>
        <mxCell id="lambda" parent="1" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.lambda_function;fillColor=#F58534;gradientColor=none;labelBackgroundColor=#f5f5f5;fontBackgroundColor=#f5f5f5;" value="aws_lambda_function.email" vertex="1">
          <mxGeometry height="86" width="84" x="1090" y="360" as="geometry" />
        </mxCell>
        <mxCell id="iam" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#FF9900;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.identity_and_access_management;labelBackgroundColor=#f5f5f5;" value="IAM Role + Policies" vertex="1">
          <mxGeometry height="82" width="82" x="1310" y="460" as="geometry" />
        </mxCell>
        <mxCell id="cw" parent="1" style="sketch=0;outlineConnect=0;fontColor=#232F3E;fillColor=#2E73B8;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=11;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudwatch;labelBackgroundColor=#f5f5f5;" value="aws_cloudwatch_log_group.email_logs" vertex="1">
          <mxGeometry height="82" width="82" x="1520" y="360" as="geometry" />
        </mxCell>
        <mxCell id="step1" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBackgroundColor=#f5f5f5;" value="1" vertex="1">
          <mxGeometry height="20" width="20" x="205" y="170" as="geometry" />
        </mxCell>
        <mxCell id="step2" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBackgroundColor=#f5f5f5;" value="2" vertex="1">
          <mxGeometry height="20" width="20" x="500" y="146" as="geometry" />
        </mxCell>
        <mxCell id="step3" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBackgroundColor=#f5f5f5;" value="3" vertex="1">
          <mxGeometry height="20" width="20" x="760" y="108" as="geometry" />
        </mxCell>
        <mxCell id="step4" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBackgroundColor=#f5f5f5;" value="4" vertex="1">
          <mxGeometry height="20" width="20" x="1040" y="165" as="geometry" />
        </mxCell>
        <mxCell id="step5" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;labelBackgroundColor=#f5f5f5;" value="5" vertex="1">
          <mxGeometry height="20" width="20" x="1600" y="224" as="geometry" />
        </mxCell>
        <mxCell id="inventory" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=left;verticalAlign=top;spacing=8;labelBackgroundColor=default;" value="&lt;b&gt;Full Terraform Resource Inventory (iac/main.tf)&lt;/b&gt;&lt;br&gt;&lt;b&gt;Route53:&lt;/b&gt; aws_route53_zone.default, aws_route53_record.default, aws_route53_record.default_www, aws_route53_zone.backup, aws_route53_record.backup, aws_route53_record.backup_www, aws_route53_record.ses_verif, aws_route53_record.email&lt;br&gt;&lt;b&gt;SES:&lt;/b&gt; aws_ses_domain_identity.primary, aws_ses_domain_identity_verification.ses_verif, aws_ses_email_identity.email, aws_ses_receipt_rule_set.primary, aws_ses_active_receipt_rule_set.primary, aws_ses_receipt_rule.noreply, aws_ses_receipt_rule.archive, aws_ses_receipt_rule.forward&lt;br&gt;&lt;b&gt;S3:&lt;/b&gt; aws_s3_bucket.email, aws_s3_bucket_ownership_controls.email, aws_s3_bucket_acl.email, aws_s3_bucket_policy.email&lt;br&gt;&lt;b&gt;IAM:&lt;/b&gt; aws_iam_role.email, aws_iam_policy.lambda_logs, aws_iam_role_policy_attachment.lambda_logs, aws_iam_policy.s3_get_object, aws_iam_role_policy_attachment.s3_get_object, aws_iam_policy.send_raw_email, aws_iam_role_policy_attachment.send_raw_email&lt;br&gt;&lt;b&gt;Compute/Logs:&lt;/b&gt; aws_lambda_function.email, aws_lambda_permission.email, aws_cloudwatch_log_group.email_logs" vertex="1">
          <mxGeometry height="210" width="1890" x="60" y="640" as="geometry" />
        </mxCell>
        <mxCell id="legend" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacing=8;labelBackgroundColor=default;" value="&lt;b&gt;Behavior Summary&lt;/b&gt;&lt;br&gt;1) DNS intake (What): Internet Users query Route53 zones. (Why): resolve domain traffic. (How): Route53 A records answer requests.&lt;br&gt;2) Web routing (What): default zone routes web DNS to Vercel. (Why): serve site. (How): web DNS mapping to Vercel endpoint.&lt;br&gt;3) Mail ingress (What): Route53 MX/TXT direct mail/auth to SES. (Why): receive/verify email for domain. (How): MX + SES verification records.&lt;br&gt;4) Processing (What): SES archives to S3 and invokes Lambda. (Why): retain and process inbound mail. (How): SES rules trigger S3 + Lambda actions.&lt;br&gt;5) Delivery/ops (What): Lambda forwards mail and writes logs. (Why): complete forwarding with observability. (How): Gmail forward + CloudWatch logs (+ IAM permissions)." vertex="1">
          <mxGeometry height="150" width="1890" x="60" y="880" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
